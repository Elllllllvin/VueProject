<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Ë°®Ê†º</title>
    <link rel="stylesheet" href="./css/index.css" />
  </head>

  <body>
    <p>This is a Self-Defined Table</p>
    <div class="container" id="app">
      <!-- ËøáÊª§Ê®°Âùó -->
      <div class="filter-module">
        <div class="singlefilter">
          Name:
          <select v-model="filterName" placeholder="ËØ∑ÈÄâÊã©ËøáÊª§">
            <option value="ALL">ALL</option>
            <option v-for="item in TableData">{{item.name}}</option>
          </select>
        </div>
        <div class="singlefilter">
          Sex:
          <select v-model="filterSex" placeholder="ËØ∑ÈÄâÊã©ËøáÊª§">
            <option value="ALL">ALL</option>
            <option v-for="item in Sexset">
              <!--               v-if="Sexset.indexOf(item.sex) == -1"
              v-on:change="AddSexset(item.sex)" -->
              {{item}}
            </option>
          </select>
        </div>
        <div class="singlefilter">
          Birthday:
          <select v-model="filterBirthday" placeholder="ËØ∑ÈÄâÊã©ËøáÊª§">
            <option value="ALL">ALL</option>
            <option v-for="item in TableData">{{item.birthday}}</option>
          </select>
        </div>
        <div class="singlefilter">
          Address:
          <select v-model="filterAddress" placeholder="ËØ∑ÈÄâÊã©ËøáÊª§">
            <option value="ALL">ALL</option>
            <option v-for="item in TableData">{{item.addr}}</option>
          </select>
        </div>
        <div class="singlefilter">
          Student-ID:
          <select v-model="filterStudentID" placeholder="ËØ∑ÈÄâÊã©ËøáÊª§">
            <option value="ALL">ALL</option>
            <option v-for="item in TableData">{{item.stuid}}</option>
          </select>
        </div>
      </div>
      <!-- Ë°®Ê†ºÊ®°Âùó -->

      <div class="table-module">
        <table class="table-css">
          <thead>
            <tr>
              <th v-for="item in HeadData">
                {{item.name}}
                <!-- nameÊéíÂ∫è -->
                <button
                  class="sortbutton"
                  v-on:click="sortByNameAsc"
                  v-if="item.name=='Name'"
                >
                  üëÜ
                </button>
                <button
                  class="sortbutton"
                  v-on:click="sortByNameDsc"
                  v-if="item.name=='Name'"
                >
                  üëá
                </button>
                <!-- sexÊéíÂ∫è -->
                <button
                  class="sortbutton"
                  v-on:click="sortBySexAsc"
                  v-if="item.name=='Sex'"
                >
                  üëÜ
                </button>
                <button
                  class="sortbutton"
                  v-on:click="sortBySexDsc"
                  v-if="item.name=='Sex'"
                >
                  üëá
                </button>
                <!-- BirthdayÊéíÂ∫è -->
                <button
                  class="sortbutton"
                  v-on:click="sortByBirthdayAsc"
                  v-if="item.name=='Birthday'"
                >
                  üëÜ
                </button>
                <button
                  class="sortbutton"
                  v-on:click="sortByBirthdayDsc"
                  v-if="item.name=='Birthday'"
                >
                  üëá
                </button>
                <!-- AddressÊéíÂ∫è -->
                <button
                  class="sortbutton"
                  v-on:click="sortByAddressAsc"
                  v-if="item.name=='Address'"
                >
                  üëÜ
                </button>
                <button
                  class="sortbutton"
                  v-on:click="sortByAddressDsc"
                  v-if="item.name=='Address'"
                >
                  üëá
                </button>
                <!-- stu-idÊéíÂ∫è -->
                <button
                  class="sortbutton"
                  v-on:click="sortByStuidAsc"
                  v-if="item.name=='Student-ID'"
                >
                  üëÜ
                </button>
                <button
                  class="sortbutton"
                  v-on:click="sortByStuidDsc"
                  v-if="item.name=='Student-ID'"
                >
                  üëá
                </button>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr
              v-for="(item,index) in TableData"
              v-if="(filterName == 'ALL' || item.name == filterName) && 
                    (filterSex == 'ALL' || item.sex == filterSex)&& 
                    (filterAddress == 'ALL' || item.addr == filterAddress)&& 
                    (filterBirthday == 'ALL' || item.birthday == filterBirthday)&&
                    (filterStudentID == 'ALL' || item.stuid == filterStudentID) "
            >
              <td v-for="field in HeadData">{{ item[field.fieldname] }}</td>
              <td>
                <button
                  class="removebutton"
                  v-on:click="remove"
                  v-if="(filterName == 'ALL' || item.name == filterName) && 
                    (filterSex == 'ALL' || item.sex == filterSex)&& 
                    (filterAddress == 'ALL' || item.addr == filterAddress)&& 
                    (filterBirthday == 'ALL' || item.birthday == filterBirthday)&&
                    (filterStudentID == 'ALL' || item.stuid == filterStudentID) "
                >
                  Remove
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Ê∑ªÂä†Ê®°Âùó -->
      <div class="add-module">
        <div class="newinputdiv" v-for="item in HeadData">
          {{item.name + ':'}}
          <input
            v-model="inputValue[item.fieldname]"
            placeholder="ËØ∑ËæìÂÖ•‰ªªÂä°"
            autofocus="autofocus"
            autocomplete="on"
            class="newinput"
          />
        </div>
        <button
          class="addbutton"
          v-on:click="add"
          autofocus="autofocus"
          autocomplete="off"
        >
          Add
        </button>
      </div>
    </div>
  </body>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/vue/dist/vuex.js"></script> -->

  <!-- ÂºÄÂèëÁéØÂ¢ÉÁâàÊú¨ÔºåÂåÖÂê´‰∫ÜÊúâÂ∏ÆÂä©ÁöÑÂëΩ‰ª§Ë°åË≠¶Âëä -->

  <script>
    var app = new Vue({
      el: "#app",
      data: {
        message: "This is a Self-Defined table",
        HeadData: [],

        TableData: [],
        inputValue: {
          name: "Unknown",
          sex: "Unknown",
          birthday: "Unknown",
          addr: "Unknown",
          stuid: "Unknown",
        },
        filterName: "ALL",
        filterSex: "ALL",
        filterBirthday: "ALL",
        filterAddress: "ALL",
        filterStudentID: "ALL",
        Sexset: ["Male", "Female"],
      },
      methods: {
        //++++
        // AddSexset: function (sex) {
        //   if (this.Sexset.indexOf(sex) == -1) {
        //     this.Sexset.push(sex);
        //   }
        // },

        add: function () {
          let copy = Object.assign({}, this.inputValue); //Ê∑ªÂä†‰∏ÄË°åÊï∞ÊçÆ
          this.TableData.push(copy);
        },
        remove: function (index) {
          this.TableData.splice(index, 1);
        },

        sortByStuidAsc: function () {
          //È°∫Â∫è‰ªéÂ∞èÂà∞Â§ß
          this.TableData.sort(function (a, b) {
            return a.stuid - b.stuid;
          });
        },
        sortByStuidDsc: function () {
          //ÈÄÜÂ∫è‰ªéÂ§ßÂà∞Â∞è
          this.TableData.sort(function (a, b) {
            return b.stuid - a.stuid;
          });
        },
        sortByNameAsc: function () {
          this.TableData.sort(function (a, b) {
            return a.name.localeCompare(b.name, "en");
          });
        },
        sortByNameDsc: function () {
          this.TableData.sort(function (a, b) {
            return b.name.localeCompare(a.name, "en");
          });
        },
        sortBySexAsc: function () {
          this.TableData.sort(function (a, b) {
            return a.sex.localeCompare(b.sex, "en");
          });
        },
        sortBySexDsc: function () {
          this.TableData.sort(function (a, b) {
            return b.sex.localeCompare(a.sex, "en");
          });
        },
        sortByBirthdayAsc: function () {
          this.TableData.sort(function (a, b) {
            return a.birthday.localeCompare(b.birthday, "en");
          });
        },
        sortByBirthdayDsc: function () {
          this.TableData.sort(function (a, b) {
            return b.birthday.localeCompare(a.birthday, "en");
          });
        },
        sortByAddressAsc: function () {
          this.TableData.sort(function (a, b) {
            return a.addr.localeCompare(b.addr, "en");
          });
        },
        sortByAddressDsc: function () {
          this.TableData.sort(function (a, b) {
            return b.addr.localeCompare(a.addr, "en");
          });
        },
      },
      created: function () {
        //ÂèëËµ∑‰∏Ä‰∏™AjaxÁöÑËØ∑Ê±ÇÂà∞ÂêéÂè∞Ëé∑ÂèñÊï∞ÊçÆ
        this.TableData = [
          {
            name: "Alice",
            sex: "Female",
            birthday: "00.12.14",
            addr: "Hangzhou",
            stuid: "3190101234",
          },
          {
            name: "Bob",
            sex: "Male",
            birthday: "01.1.24",
            addr: "GuangZhou",
            stuid: "3190104588",
          },
          {
            name: "Catherine",
            sex: "Female",
            birthday: "02.04.03",
            addr: "Hangzhou",
            stuid: "3190107848",
          },
          {
            name: "David",
            sex: "Male",
            birthday: "01.11.12",
            addr: "BeiJing",
            stuid: "3190104785",
          },
        ];

        this.HeadData = [
          { name: "Name", fieldname: "name" },
          { name: "Sex", fieldname: "sex" },
          { name: "Birthday", fieldname: "birthday" },
          { name: "Address", fieldname: "addr" },
          { name: "Student-ID", fieldname: "stuid" },
        ];
      },
    });
  </script>
</html>
